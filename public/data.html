<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
<script
  src="http://code.jquery.com/jquery-3.1.1.js"
  integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
  crossorigin="anonymous"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

</head>
<body>
    <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    <div id="container2" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    <div id="container3" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    <script>
/* jshint esversion: 6 */
//data in here as an example, actually taken from our database
//Object id fucks everything up.

var chartTitle = "Last 7 Break Intervals Named by Activity";
var xAxisLabelArray = ['Chunk1', 'Chunk2', 'Chunk3', 'Chunk4', 'Chunk5',"crazyArea"];
var yAxisLabelArray = ['salvia','peyote','ergot bread','whippits'];

//just for testing, delet later
var intervalArray = [{
   //"_id" : ObjectId("580bbc73cba2040776fea6a8"),
    "timeFromStart" : 18549,
    "perceivedChallenge" : 5,
    "percievedSkill" : 4,
    "activity" : "bongrippin",
    "caffeine" : true,
    "snack" : false,
    "__v" : 0
},
{
    //"_id" : ObjectId("580bbc90cba2040776fea6a9"),
    "timeFromStart" : 47909,
    "perceivedChallenge" : 3,
    "percievedSkill" : 4,
    "activity" : "minfulness",
    "caffeine" : false,
    "snack" : true,
    "__v" : 0
},
{
    //"_id" : ObjectId("580bbf0bcba2040776fea6ab"),
    "timeFromStart" : 22176,
    "perceivedChallenge" : 2,
    "percievedSkill" : 3,
    "activity" : "ladybug catching",
    "caffeine" : false,
    "snack" : false,
    "__v" : 0
},
{
    //"_id" : ObjectId("580bbf40cba2040776fea6ae"),
    "timeFromStart" : 21343,
    "perceivedChallenge" : 5,
    "percievedSkill" : 6,
    "activity" : "yachting",
    "caffeine" : false,
    "snack" : true,
    "__v" : 0
},
{
    //"_id" : ObjectId("580bbfa5cba2040776fea6b1"),
    "timeFromStart" : 49849,
    "perceivedChallenge" : 5,
    "percievedSkill" : 5,
    "activity" : "tantric pumpkin carving",
    "caffeine" : false,
    "snack" : false,
    "__v" : 0
},
{
    //"_id" : ObjectId("580bc075cba2040776fea6b3"),
    "timeFromStart" : 20064,
    "perceivedChallenge" : 3,
    "percievedSkill" : 4,
    "activity" : "hugged tree",
    "caffeine" : false,
    "snack" : true,
    "__v" : 0
},
{
    //"_id" : ObjectId("580bc08acba2040776fea6b4"),
    "timeFromStart" : 40596,
    "perceivedChallenge" : 6,
    "percievedSkill" : 1,
    "activity" : "breathed air",
    "caffeine" : true,
    "snack" : false,
    "__v" : 0
}];
var chunkArray = [{
    //"_id" : ObjectId("580bbc60cba2040776fea6a7"),
    "intervals" : [ 
        "580bbc73cba2040776fea6a8", 
        "580bbc90cba2040776fea6a9"
    ],
    "__v" : 0,
    "timeSpent" : 49,
    "timeOfDay" : "Sat Oct 22 2016 13:22:08 GMT-0600 (MDT)",
    "hoursSlept" : 5,
    "mealsEaten" : 1
},
{
    //"_id" : ObjectId("580bbef5cba2040776fea6aa"),
    "intervals" : [ 
        "580bbf0bcba2040776fea6ab"
    ],
    "__v" : 0,
    "timeSpent" : 26,
    "timeOfDay" : "Sat Oct 22 2016 13:33:09 GMT-0600 (MDT)",
    "hoursSlept" : 10,
    "mealsEaten" : 5
},
{
    //"_id" : ObjectId("580bbf1ccba2040776fea6ac"),
    "intervals" : [],
    "__v" : 0,
    "timeSpent" : 1,
    "timeOfDay" : "Sat Oct 22 2016 13:33:48 GMT-0600 (MDT)",
    "hoursSlept" : 2,
    "mealsEaten" : 2
},
{
    //"_id" : ObjectId("580bbf2bcba2040776fea6ad"),
    "intervals" : [ 
        "580bbf40cba2040776fea6ae"
    ],
    "__v" : 0,
    "timeSpent" : 34,
    "timeOfDay" : "Sat Oct 22 2016 13:34:03 GMT-0600 (MDT)",
    "hoursSlept" : 5,
    "mealsEaten" : 3
},
{
    //"_id" : ObjectId("580bbf58cba2040776fea6af"),
    "intervals" : [],
    "__v" : 0,
    "timeSpent" : 10,
    "timeOfDay" : "Sat Oct 22 2016 13:34:48 GMT-0600 (MDT)",
    "hoursSlept" : 7,
    "mealsEaten" : 4
},
{
    //"_id" : ObjectId("580bbf74cba2040776fea6b0"),
    "intervals" : [ 
        "580bbfa5cba2040776fea6b1"
    ],
    "__v" : 0,
    "timeSpent" : 149,
    "timeOfDay" : "Sat Oct 22 2016 13:35:16 GMT-0600 (MDT)",
    "hoursSlept" : 1,
    "mealsEaten" : 0
},
{
    //"_id" : ObjectId("580bc061cba2040776fea6b2"),
    "intervals" : [ 
        "580bc075cba2040776fea6b3", 
        "580bc08acba2040776fea6b4"
    ],
    "__v" : 0,
    "timeSpent" : 41,
    "timeOfDay" : "Sat Oct 22 2016 13:39:13 GMT-0600 (MDT)",
    "hoursSlept" : 5,
    "mealsEaten" : 3
},
];


var challArr = [];
var skillArr = [];
var activityLabel = [];
var caffeineArr = [];
var snackArr = [];

console.log(intervalArray);
function orderByTime(){
    intervalArray.sort(intervalArray.timeFromStart);
}
console.log(intervalArray);

function getchallArr (arr){
    for(var i in arr){
        challArr.push(arr[i].perceivedChallenge);
    }      
}
getchallArr(intervalArray);

function getskillArr (arr){
    for(var i in arr){
        skillArr.push(arr[i].percievedSkill);
    }  
}
getskillArr(intervalArray);

function getActivity (arr){
    for(var i in arr){
        activityLabel.push(arr[i].activity);
    }     
}
getActivity(intervalArray);

function getSnacks (arr){
    for(var i =0; i <arr.length; i++){
        if(arr[i].snack === false){
            snackArr.push("null");
        } snackArr.push("5");
    }
}
getSnacks(intervalArray);
function getCaffeine (arr){
    for(var i =0; i <arr.length; i++){
        if(arr[i].caffeine === false){
            caffeineArr.push("null");
        } caffeineArr.push("6");
    }
}
getCaffeine(intervalArray);

console.log(caffeineArr);
console.log(snackArr);

//the high chart function
$(function () {
    $('#container').highcharts({

        title: {
            text: chartTitle
        } ,
        xAxis: {
            categories: activityLabel
        },
        credits: {
            enabled: false
        },
        series: [{
            name: 'Percieved Challenge',
            data: challArr
        }, {
            name: 'Perceived Skill',
            data: skillArr
        }, {
            name: 'Snacks',//not sure why they produce more values than in array
            data: snackArr
        }, {
            name: 'Caffeine',//not sure why they produce more values than in array
            data: caffeineArr
        }]
    });
});


    </script>
</body>
</html>